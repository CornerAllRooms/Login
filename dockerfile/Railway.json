# Dockerfile
FROM php:8.2-apache

# 1. Install MongoDB support
RUN apt-get update && \
    apt-get install -y \
    libssl-dev \
    libmongoc-dev \
    libbson-dev && \
    pecl install mongodb && \
    docker-php-ext-enable mongodb

# 2. Configure PHP
RUN echo "extension=mongodb.so" > /usr/local/etc/php/conf.d/mongodb.ini

# 3. Deploy app
WORKDIR /var/www/html
COPY . .
RUN composer install --no-dev --ignore-platform-reqs
